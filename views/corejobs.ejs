<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
      .circular-image {
            border-radius:50%;
            overflow: hidden;
            width: 150px; /* Adjust the size of the circular image */
            height: 150px; /* Adjust the size of the circular image */
            margin: 0 auto; /* Center the circular image */
        }
      .border
      {
        border:2px solid black;
        margin: 30px;

         
      }
      .circular-image img {
            width: 100%;
            height: auto;
        }
      .popup {
        display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }
    .popup-content {
      background: #fff;
      padding: 20px;
      width: auto;
      height:auto;
      text-align: center;
      border-radius: 5px;
      border: 2px solid black;
    
    }


    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</head>
<body>
  <h1>You are Eligible to get Following info </h1>
  <div style="margin:5px "><div style="display:flex">
    <input class="col-md-3" id="bar" type="text" width=100%  placeholder="enter employee id number" style="margin-left: 5px; display: none";/><button  id="search" class="btn-primary" style="margin-left: 0%; display: none" ;onclick="search()">search</button>
  </div>
  <div id="info"style=" margin-top: 5px;">
      

  </div>

    
    <div class="popup" id="popup1">
  <div class="popup-content shadow-lg p-4 mb-5 bg-white rounded">
    <div class="circular-image"><img id="img2" src="#"/></div>
    <h2 id="popup-title"></h2>
    <p id="popup-info"></p>
    <div class="btn btn-success" onclick="hidePopup()">Close</div>
  </div>
</div>

</div>
    
  </div>
  

  <script src="../public/js/jquery-3.4.1.min.js"></script>
  <script>
    function popboxfun(name,img,body)
      {
                
             const x=document.getElementById('popup-title');
              x.textContent = name;
              x.style="color:blue;font-family: Georgia, serif; "
              document.getElementById("img2").src="../image/sri.png"
              document.getElementById('popup-info').innerText = body;
              document.getElementById('popup1').style.display = 'flex'
            
            
          
      }
    const getinfo=(url)=>
    {    
        fetch(url).then((res)=>res.json()).then((value)=>{console.log(value);
        let heading=document.createElement("div");
        heading.textContent="Developers information"
        heading.style="color:black; font-family:quo vero reiciendis velit similique earum; font-size:20px"
        let columns1=document.getElementById("info")
        columns1.className="row";
        columns1.appendChild(heading);
        let arraymap;
           
            arraymap=value.map((val,i,arr)=>{if(value[i].openings>0){const divtemp=document.createElement("div");divtemp.className="col-md-3 m-4 border shadow-lg p-3 mb-5 bg-white rounded";  ;let col1=document.createElement('div');
            const imagetag=document.createElement("img");
            imagetag.src="../image/raj.jpg"

            col1.textContent=`Jobname: ${value[i].jobname}`;
            col1.className=".col1";
            
            
            //<div id="info"style=" margin-top: 5px;">
  //<div class="col-md-3 m-4 border shadow-lg p-3 mb-5 bg-white rounded">
  //<div class="circular-image"><img class="circular-image"/></div>
  //<div class="col1"></div>
  //<div class="col2"></div>
  //<div class="col3"></div>
//</div>
          let col2=document.createElement('div');
          col2.textContent=`openings:${value[i].openings}`;
          col2.className=".col2";
          let col3=document.createElement('div');
          col3.textContent=`lastdate:${value[i].lastdate}`;
          col3.className=".col3";
          
          let imgcol=document.createElement('div');
          imgcol.className="circular-image"
          imgcol.appendChild(imagetag)
          divtemp.append(imgcol);
          divtemp.append(col1);
          divtemp.append(col2);
          divtemp.append(col3);
          const pop=document.createElement("div");
            pop.className="popup";
            pop.textContent="hiii";
          let butt=document.createElement('button');
          butt.className="btn btn-primary" ;
          butt.textContent="MoreInfo";
          let butt2=document.createElement('button')
          butt2.className="btn btn-success m-2" ;
          butt2.textContent="Apply";
          divtemp.append(butt2);
          divtemp.append(butt)
          butt2.addEventListener("click",()=>{location.href=`./${value[i].jobname}form.html`})
          butt.addEventListener("click",()=>popboxfun(value[i].name,"../image/img2.png",value[i].email))
          
          columns1.appendChild(divtemp);
            }
          
        })})
          
            
            }
            const hidePopup=()=>
          {
            document.getElementById("popup1").style.display="none";
          }

       
          document.addEventListener("DOMContentLoaded", function() {
    getinfo("http://localhost:5000/corejobsapi");

    // Other code related to your button click event can go here
    $("#bar").css("display", "flex");
    $("#search").css("display", "flex");

    $("#search").on("click", () => {
        var str = $("#bar").val();
        fetch(`http://localhost:5000/corejobsapi/?jobname=${str}`)
            .then((value) => value.json())
            .then((data) => {
                if (data && Array.isArray(data) && data.length > 0) {
                    console.log(data);
                    popboxfun(data[0].name, "../image/img2.png", data[0].body);
                }
            });
    });
});
  </script>
</body>
</html>